# Audi Q5 MMI/MIB2/3 Profile
# Optimized for maximum compatibility with Audi infotainment systems

[profile]
name = "Audi Q5 MMI"
description = "Optimized for Audi Q5 2019 MMI - Official specs: 720×576, 2 Mbps, 25fps"
version = "1.1.0"

[video]
# Resolution constraints (Official Audi Q5 2019 spec: 720×576 max)
max_width = 720
max_height = 576
maintain_aspect_ratio = true

# Codec settings (H.264 Main profile for compatibility)
codec = "h264"
profile = "main"
level = "4.0"
pixel_format = "yuv420p"

# Quality settings (Official spec: max 2 Mbps bitrate, 25 fps)
max_bitrate_mbps = 2.0     # Official max: 2,000 kbit/s (don't exceed)
max_fps = 25               # Official max: 25 fps
quality_cq = 24            # Constant quality (lower = better, 18-28 typical)

# Encoder priority (ordered fallback: NVENC → AMF → QuickSync → CPU)
encoder_priority = ["h264_nvenc", "h264_amf", "h264_qsv", "libx264"]

# Advanced FFmpeg options (empty for defaults)
extra_video_args = []

[audio]
codec = "aac"
bitrate_kbps = 128
sample_rate = 44100
channels = 2
extra_audio_args = []

[subtitles]
embed = true
languages = ["en", "ar"]
auto_generate = false
burn_in = false

[output]
container = "mp4"
faststart = true
output_dir = "./output"
filename_template = "{title}_{id}.{ext}"

# File size handling (IMPORTANT: Audi Q5 supports FAT32, exFAT, and NTFS!)
# FAT32: 4GB limit - use "split" if your USB is FAT32
# exFAT/NTFS: No limit - use "warn" if your USB is exFAT or NTFS
max_file_size_gb = 3.9     # FAT32 limit with margin
on_size_exceed = "split"   # Options: "split" | "compress" | "warn" | "skip"

# Split settings
split_part_template = "{stem}_part{num:03d}.{ext}"

# Compress settings (if on_size_exceed = "compress")
target_bitrate_reduction = 0.8

[transfer]
# USB auto-copy (disabled by default)
usb_auto_copy = false
usb_mount_path = ""        # Auto-detect if empty
usb_subdir = "Videos"

# Network transfer (disabled by default)
network_copy = false
network_path = ""
network_subdir = ""

# Transfer options
verify_checksum = true
delete_after_transfer = false

[download]
# yt-dlp format selection (auto-optimized by default)
# The downloader automatically builds an optimized format string based on your
# video/audio output settings to avoid downloading unnecessarily large files.
# For a 720x540 @ 25fps target, it will download max 720p @ 30fps instead of 4K.
# You can override this by setting a custom format_preference string.
format_preference = "auto"  # "auto" = use profile-optimized format (recommended)
download_archive = "~/.config/yt2audi/archive.txt"
# rate_limit_mbps - omitted means no rate limit
retries = 3
fragment_retries = 10

# Playlist settings
playlist_start = 1
# playlist_end - omitted means download all videos
playlist_reverse = false

[logging]
level = "INFO"
format = "json"
log_file = "~/.config/yt2audi/logs/yt2audi.log"
rotation_size_mb = 10
rotation_count = 5
